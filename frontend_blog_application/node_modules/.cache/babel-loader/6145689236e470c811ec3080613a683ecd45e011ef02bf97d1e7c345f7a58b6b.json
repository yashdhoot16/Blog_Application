{"ast":null,"code":"/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\n/**\n * @module helpers/html\n */\nimport { globalDocument, IS_PROD } from \"../../constants.js\";\nimport { Dom } from \"../../dom/dom.js\";\nimport { trim } from \"../string/trim.js\";\nimport { $$ } from \"../utils/selector.js\";\nfunction normalizeCSS(s) {\n  return s.replace(/mso-[a-z-]+:[\\s]*[^;]+;/gi, '').replace(/mso-[a-z-]+:[\\s]*[^\";']+$/gi, '').replace(/border[a-z-]*:[\\s]*[^;]+;/gi, '').replace(/([0-9.]+)(pt|cm)/gi, (match, units, metrics) => {\n    switch (metrics.toLowerCase()) {\n      case 'pt':\n        return (parseFloat(units) * 1.328).toFixed(0) + 'px';\n      case 'cm':\n        return (parseFloat(units) * 0.02645833).toFixed(0) + 'px';\n    }\n    return match;\n  });\n}\n/**\n * If the HTML has CSS rules with selectors,\n * it applies them to the selectors in the HTML itself\n * and then removes the selector styles, leaving only the inline ones.\n */\nexport function applyStyles(html) {\n  if (html.indexOf('<html ') === -1) {\n    return html;\n  }\n  html = html.substring(html.indexOf('<html '), html.length);\n  html = html.substring(0, html.lastIndexOf('</html>') + '</html>'.length);\n  const iframe = globalDocument.createElement('iframe');\n  iframe.style.display = 'none';\n  globalDocument.body.appendChild(iframe);\n  let convertedString = '',\n    collection = [];\n  try {\n    const iframeDoc = iframe.contentDocument || (iframe.contentWindow ? iframe.contentWindow.document : null);\n    if (iframeDoc) {\n      iframeDoc.open();\n      iframeDoc.write(html);\n      iframeDoc.close();\n      try {\n        for (let i = 0; i < iframeDoc.styleSheets.length; i += 1) {\n          const rules = iframeDoc.styleSheets[i].cssRules;\n          for (let idx = 0; idx < rules.length; idx += 1) {\n            if (rules[idx].selectorText === '') {\n              continue;\n            }\n            collection = $$(rules[idx].selectorText, iframeDoc.body);\n            collection.forEach(elm => {\n              elm.style.cssText = normalizeCSS(rules[idx].style.cssText + ';' + elm.style.cssText);\n            });\n          }\n        }\n      } catch (e) {\n        if (!IS_PROD) {\n          throw e;\n        }\n      }\n      Dom.each(iframeDoc.body, node => {\n        if (Dom.isElement(node)) {\n          const elm = node;\n          const css = elm.getAttribute('style');\n          if (css) {\n            elm.style.cssText = normalizeCSS(css);\n          }\n          if (elm.hasAttribute('style') && !elm.getAttribute('style')) {\n            elm.removeAttribute('style');\n          }\n        }\n      });\n      convertedString = iframeDoc.firstChild ? trim(iframeDoc.body.innerHTML) : '';\n    }\n  } catch (_a) {} finally {\n    Dom.safeRemove(iframe);\n  }\n  if (convertedString) {\n    html = convertedString;\n  }\n  return trim(html.replace(/<(\\/)?(html|colgroup|col|o:p)[^>]*>/g, '').replace(/<!--[^>]*>/g, ''));\n}","map":{"version":3,"names":["globalDocument","IS_PROD","Dom","trim","$$","normalizeCSS","s","replace","match","units","metrics","toLowerCase","parseFloat","toFixed","applyStyles","html","indexOf","substring","length","lastIndexOf","iframe","createElement","style","display","body","appendChild","convertedString","collection","iframeDoc","contentDocument","contentWindow","document","open","write","close","i","styleSheets","rules","cssRules","idx","selectorText","forEach","elm","cssText","e","each","node","isElement","css","getAttribute","hasAttribute","removeAttribute","firstChild","innerHTML","_a","safeRemove"],"sources":["C:/Users/YDHOOT/Documents/Spring Tool Suite Projects/BlogApplication/frontend_blog_application/node_modules/jodit/esm/core/helpers/html/apply-styles.js"],"sourcesContent":["/*!\n * Jodit Editor (https://xdsoft.net/jodit/)\n * Released under MIT see LICENSE.txt in the project root for license information.\n * Copyright (c) 2013-2025 Valeriy Chupurnov. All rights reserved. https://xdsoft.net\n */\n/**\n * @module helpers/html\n */\nimport { globalDocument, IS_PROD } from \"../../constants.js\";\nimport { Dom } from \"../../dom/dom.js\";\nimport { trim } from \"../string/trim.js\";\nimport { $$ } from \"../utils/selector.js\";\nfunction normalizeCSS(s) {\n    return s\n        .replace(/mso-[a-z-]+:[\\s]*[^;]+;/gi, '')\n        .replace(/mso-[a-z-]+:[\\s]*[^\";']+$/gi, '')\n        .replace(/border[a-z-]*:[\\s]*[^;]+;/gi, '')\n        .replace(/([0-9.]+)(pt|cm)/gi, (match, units, metrics) => {\n        switch (metrics.toLowerCase()) {\n            case 'pt':\n                return (parseFloat(units) * 1.328).toFixed(0) + 'px';\n            case 'cm':\n                return (parseFloat(units) * 0.02645833).toFixed(0) + 'px';\n        }\n        return match;\n    });\n}\n/**\n * If the HTML has CSS rules with selectors,\n * it applies them to the selectors in the HTML itself\n * and then removes the selector styles, leaving only the inline ones.\n */\nexport function applyStyles(html) {\n    if (html.indexOf('<html ') === -1) {\n        return html;\n    }\n    html = html.substring(html.indexOf('<html '), html.length);\n    html = html.substring(0, html.lastIndexOf('</html>') + '</html>'.length);\n    const iframe = globalDocument.createElement('iframe');\n    iframe.style.display = 'none';\n    globalDocument.body.appendChild(iframe);\n    let convertedString = '', collection = [];\n    try {\n        const iframeDoc = iframe.contentDocument ||\n            (iframe.contentWindow ? iframe.contentWindow.document : null);\n        if (iframeDoc) {\n            iframeDoc.open();\n            iframeDoc.write(html);\n            iframeDoc.close();\n            try {\n                for (let i = 0; i < iframeDoc.styleSheets.length; i += 1) {\n                    const rules = iframeDoc.styleSheets[i].cssRules;\n                    for (let idx = 0; idx < rules.length; idx += 1) {\n                        if (rules[idx].selectorText === '') {\n                            continue;\n                        }\n                        collection = $$(rules[idx].selectorText, iframeDoc.body);\n                        collection.forEach((elm) => {\n                            elm.style.cssText = normalizeCSS(rules[idx].style.cssText +\n                                ';' +\n                                elm.style.cssText);\n                        });\n                    }\n                }\n            }\n            catch (e) {\n                if (!IS_PROD) {\n                    throw e;\n                }\n            }\n            Dom.each(iframeDoc.body, node => {\n                if (Dom.isElement(node)) {\n                    const elm = node;\n                    const css = elm.getAttribute('style');\n                    if (css) {\n                        elm.style.cssText = normalizeCSS(css);\n                    }\n                    if (elm.hasAttribute('style') &&\n                        !elm.getAttribute('style')) {\n                        elm.removeAttribute('style');\n                    }\n                }\n            });\n            convertedString = iframeDoc.firstChild\n                ? trim(iframeDoc.body.innerHTML)\n                : '';\n        }\n    }\n    catch (_a) {\n    }\n    finally {\n        Dom.safeRemove(iframe);\n    }\n    if (convertedString) {\n        html = convertedString;\n    }\n    return trim(html\n        .replace(/<(\\/)?(html|colgroup|col|o:p)[^>]*>/g, '')\n        .replace(/<!--[^>]*>/g, ''));\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}